(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{157:function(e,t,n){var content=n(174);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(28).default)("4806b84d",content,!0,{sourceMap:!1})},158:function(e,t,n){var content=n(176);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(28).default)("46f87929",content,!0,{sourceMap:!1})},159:function(e,t,n){var content=n(203);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(28).default)("7aa83e73",content,!0,{sourceMap:!1})},160:function(e,t,n){var content=n(222);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(28).default)("6759f5ab",content,!0,{sourceMap:!1})},161:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMTQuMTEgNzAuNjIiPjxkZWZzPjxzdHlsZT4uY2xzLTF7ZmlsbDojMjMxODE1O308L3N0eWxlPjwvZGVmcz48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0i44Os44Kk44Ok44O8XzEiIGRhdGEtbmFtZT0i44Os44Kk44Ok44O8IDEiPjxyZWN0IGNsYXNzPSJjbHMtMSIgd2lkdGg9IjIwLjciIGhlaWdodD0iNzAuNjIiLz48cmVjdCBjbGFzcz0iY2xzLTEiIHg9IjM4LjI4IiB5PSIwLjY2IiB3aWR0aD0iMjAuNyIgaGVpZ2h0PSI2OS45NiIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSIxMTQuMTEgNTEuOTggNzYuOCA2OS45NiA3Ni44IDMzLjk5IDExNC4xMSA1MS45OCIvPjwvZz48L2c+PC9zdmc+"},172:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNS44OCAyNi4xOCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiM5ZmEwYTA7fTwvc3R5bGU+PC9kZWZzPjxnIGlkPSJMYXllcl8yIiBkYXRhLW5hbWU9IkxheWVyIDIiPjxnIGlkPSLjg6zjgqTjg6Tjg7xfMSIgZGF0YS1uYW1lPSLjg6zjgqTjg6Tjg7wgMSI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMjUuNTgsMjQuNDJsLTguODctOC44N0E5LjUyLDkuNTIsMCwxLDAsMTUuMjIsMTdsOC45MSw4LjlhMSwxLDAsMCwwLDEuNDUsMEExLDEsMCwwLDAsMjUuNTgsMjQuNDJaTTQuMjIsMTQuNzFBNy40MSw3LjQxLDAsMCwxLDE0LjcsNC4yMyw3LjQxLDcuNDEsMCwwLDEsOS40NiwxNi44OCw3LjQyLDcuNDIsMCwwLDEsNC4yMiwxNC43MVoiLz48L2c+PC9nPjwvc3ZnPg=="},173:function(e,t,n){"use strict";var r=n(157);n.n(r).a},174:function(e,t,n){(t=n(27)(!1)).push([e.i,"section{margin:20px}.expanded{flex-grow:0.3}.center{text-align:center}.logo{margin:100px auto 50px}.title{font-size:400}.titlediv{margin:50px auto}.searchdiv{margin:70px auto;justify-content:center!important}.searchlogo{float:left;width:60px;padding-top:10px}.inputbar{margin-left:30px}.displaynone{display:none}",""]),e.exports=t},175:function(e,t,n){"use strict";var r=n(158);n.n(r).a},176:function(e,t,n){(t=n(27)(!1)).push([e.i,".tile.is-child:hover{cursor:pointer}table{margin:auto;width:60%}td{margin:10px 20px;padding:15px 10px 15px 15px}.listcenter{text-align:center}.v1{width:35%;padding-left:50px}.videodesc{font-size:10px}",""]),e.exports=t},177:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0My40OSA0MS45MyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMyMzE4MTU7fTwvc3R5bGU+PC9kZWZzPjxnIGlkPSJMYXllcl8yIiBkYXRhLW5hbWU9IkxheWVyIDIiPjxnIGlkPSLjg6zjgqTjg6Tjg7xfMSIgZGF0YS1uYW1lPSLjg6zjgqTjg6Tjg7wgMSI+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjQzLjQ5IDIwLjk3IDAgNDEuOTMgMCAwIDQzLjQ5IDIwLjk3Ii8+PC9nPjwvZz48L3N2Zz4="},178:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNS45MSA0MyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMyMzE4MTU7fTwvc3R5bGU+PC9kZWZzPjxnIGlkPSJMYXllcl8yIiBkYXRhLW5hbWU9IkxheWVyIDIiPjxnIGlkPSLjg6zjgqTjg6Tjg7xfMSIgZGF0YS1uYW1lPSLjg6zjgqTjg6Tjg7wgMSI+PHJlY3QgY2xhc3M9ImNscy0xIiB3aWR0aD0iMTIuNjEiIGhlaWdodD0iNDMiLz48cmVjdCBjbGFzcz0iY2xzLTEiIHg9IjIzLjMxIiB5PSIwLjQiIHdpZHRoPSIxMi42MSIgaGVpZ2h0PSI0Mi42Ii8+PC9nPjwvZz48L3N2Zz4="},185:function(e,t){},186:function(e,t){},187:function(e,t){},202:function(e,t,n){"use strict";var r=n(159);n.n(r).a},203:function(e,t,n){(t=n(27)(!1)).push([e.i,".videocontent{width:100%;overflow:hidden;display:flex;margin:60px 20px}#main{width:30%;margin:0 50px;padding-top:30px}canvas{height:250px;margin-top:10px}.howto{margin:16px 50px;width:375px}.status{margin:150px}iframe{min-width:320px}#menu{position:absolute;text-align:center;bottom:3em;left:0;right:0}#menu ul{border-radius:2px;background-color:hsla(0,0%,100%,.3)}#menu li{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu .material-icons{font-size:30px}.explanebox{display:flex;margin:40px 0}.explanebox img{margin-right:20px}.explanebox p{margin:10px 0}.sk-spinner-pulse{width:60px;height:60px;margin:40px auto;float:left;background-color:#333;border-radius:100%;-webkit-animation:sk-pulseScaleOut 1s ease-in-out infinite;animation:sk-pulseScaleOut 1s ease-in-out infinite}@-webkit-keyframes sk-pulseScaleOut{0%{transform:scale(0)}to{transform:scale(1);opacity:0}}@keyframes sk-pulseScaleOut{0%{transform:scale(0)}to{transform:scale(1);opacity:0}}",""]),e.exports=t},221:function(e,t,n){"use strict";var r=n(160);n.n(r).a},222:function(e,t,n){(t=n(27)(!1)).push([e.i,".centering{margin:auto 10px}",""]),e.exports=t},223:function(e,t,n){"use strict";n.r(t);var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:n(161),width:"32",height:"32"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"subtitle is-3 titlediv"},[t("p",{staticClass:"has-text-weight-normal"},[this._v("動きを止めると再生される動画サイト。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon"},[t("img",{attrs:{src:n(172),width:"32",height:"32"}})])}],o={name:"SearchBar",props:{showTitle:!0},data:function(){return{results:null,searchTerm:null}},methods:{searchVideo:function(){this.$emit("search-event",this.searchTerm)},backToTop:function(){this.$emit("back-to-top-event",this.showTitle)}}},c=(n(173),n(16)),l=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section",[e.showTitle?r("div",{staticClass:"center"},[e._m(0),e._v(" "),e._m(1)]):e._e(),e._v(" "),r("div",{staticClass:"searchlogo",class:{displaynone:e.showTitle},on:{click:e.backToTop}},[r("img",{attrs:{src:n(161),width:"32",height:"32"}})]),e._v(" "),r("div",{staticClass:"field is-grouped inputbar",class:{searchdiv:e.showTitle}},[r("div",{staticClass:"control expanded"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"input",attrs:{type:"test",placeholder:"検索"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"control"},[r("button",{staticClass:"button",on:{click:e.searchVideo}},[e._m(2)])])])])])}),r,!1,null,null,null).exports,d={name:"VideoList",props:{results:null,showTitle:!0},methods:{onVideoSelect:function(e){this.$emit("selectVideo",e)}}},h=(n(175),Object(c.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{listcenter:e.showTitle}},[n("table",{directives:[{name:"show",rawName:"v-show",value:e.results,expression:"results"}],attrs:{cellspacing:"0",cellpadding:"5"}},e._l(e.results,(function(t){return n("tr",{key:t.id.videoId},[n("td",{staticClass:"v1",attrs:{valign:"top"}},[n("img",{attrs:{src:t.snippet.thumbnails.medium.url}})]),e._v(" "),n("td",{staticClass:"v2",attrs:{align:"left",valign:"top"},on:{click:function(n){return e.onVideoSelect(t.id.videoId)}}},[n("font",{attrs:{size:"1",color:"#010101"}},[n("b",[e._v(e._s(t.snippet.title))])]),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"videodesc"},[e._v(e._s(t.snippet.description))])],1)])})),0)])}),[],!1,null,null,null).exports),m=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"howto"},[t("div",{staticClass:"explanebox"},[t("img",{attrs:{src:n(177),width:"32",height:"32"}}),this._v(" "),t("p",[this._v("右手の動きを止める。")])]),this._v(" "),t("div",{staticClass:"explanebox"},[t("img",{attrs:{src:n(178),width:"32",height:"32"}}),this._v(" "),t("p",[this._v("右手を動かす。")])])])}],v=n(41),f=(n(179),n(13),n(30),n(5)),x=n(181),w=n(188),M=n(1),I=n(189),j=n.n(I);M.a.use(j.a);var y={name:"HumanPose",data:function(){return{net:{},video:{},cameras:[],cameraIndex:0,changingCamera:!1,loading:!0,windowHeight:0,framenum:0,lastPosition:[]}},props:{videoId:null},computed:{player:function(){return this.$refs.youtube.player}},methods:{changeCamera:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.changingCamera){t.next=2;break}return t.abrupt("return");case 2:return e.changingCamera=!0,e.cameraIndex++,e.cameraIndex>=e.cameras.length&&(e.cameraIndex=0),t.next=7,e.loadVideo();case 7:case"end":return t.stop()}}),t)})))()},loadNet:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.c();case 2:e.net=t.sent;case 3:case"end":return t.stop()}}),t)})))()},loadVideo:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setupCamera();case 2:e.video=t.sent,e.video.play();case 4:case"end":return t.stop()}}),t)})))()},setupCamera:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){var video,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){t.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:return(video=e.$refs.video).width=e.videoWidth,video.height=e.videoHeight,e.stopExistingVideoCapture(),t.next=8,navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:e.cameras[e.cameraIndex].deviceId,width:e.videoWidth,height:e.videoHeight}});case 8:return n=t.sent,window.console.log("using camera: "+e.cameras[e.cameraIndex].label),video.srcObject=n,t.abrupt("return",new Promise((function(e){video.onloadedmetadata=function(){e(video)}})));case 12:case"end":return t.stop()}}),t)})))()},getVideoInputs:function(){return Object(f.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=3;break}return window.console.log("enumerateDevices() not supported."),e.abrupt("return",[]);case 3:return e.next=5,navigator.mediaDevices.enumerateDevices();case 5:return t=e.sent,n=t.filter((function(e){return"videoinput"===e.kind})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))()},stopExistingVideoCapture:function(){this.video&&this.video.srcObject&&(this.video.srcObject.getTracks().forEach((function(track){track.stop()})),this.video.srcObject=null)},isAndroid:function(){return/Android/i.test(navigator.userAgent)},isiOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return this.isAndroid()||this.isiOS()},detctPose:function(){var canvas=this.$refs.output;canvas.width=this.videoWidth,canvas.height=this.videoHeight;var e=this;function t(){return n.apply(this,arguments)}function n(){return(n=Object(f.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.estimateSegmentation();case 2:r=n.sent,e.drawMask(r,canvas,e.video,{r:0,g:0,b:0,a:0}),e.drawPose(r,canvas),requestAnimationFrame(t);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}t()},drawMask:function(e,canvas,video,t){var mask=w.d(e,t,{r:0,g:0,b:0,a:0},!1);w.a(canvas,video,mask,.3,0,!0)},drawPose:function(e,canvas){var t=this,n=canvas.getContext("2d");e.forEach((function(e){var r=e.pose;r=w.b(r,e.width),t.judgeMovement(r.keypoints,.1);for(var i=0;i<r.keypoints.length;i++){var o=r.keypoints[i];if(!(o.score<.1)){var c=o.position,l=c.y,d=c.x;t.drawPoint(n,1*l,1*d,5,"aqua")}}x.a(r.keypoints,.1).forEach((function(e){t.drawSegment(t.toTuple(e[0].position),t.toTuple(e[1].position),1,2.5,"aqua",n)}))}))},drawPoint:function(e,t,n,r,o){e.beginPath(),e.arc(n,t,r,0,2*Math.PI),e.fillStyle=o,e.fill()},drawSegment:function(e,t,n,r,o,c){var l=Object(v.a)(e,2),d=l[0],h=l[1],m=Object(v.a)(t,2),f=m[0],x=m[1];c.beginPath(),c.moveTo(h*n,d*n),c.lineTo(x*n,f*n),c.lineWidth=5,c.strokeStyle=o,c.stroke()},toTuple:function(e){return[e.y,e.x]},estimateSegmentation:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.net.segmentMultiPerson(e.video,{internalResolution:"medium",segmentationThreshold:.7,maxDetections:5,scoreThreshold:.2,nmsRadius:20,numKeypointForMatching:17,refineSteps:10});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},judgeMovement:function(e,t){if(this.framenum+=1,this.framenum>20&&(this.framenum=0),this.framenum%20==0){var n=e[10];if(n.score>t){var r=n.position.x,o=n.position.y;if(0!=this.lastPosition.length){var c=r-this.lastPosition[0],l=o-this.lastPosition[1];Math.sqrt(c*c+l*l)>5?this.playYoutubeVideo(!1):this.playYoutubeVideo(!0)}this.lastPosition[0]=r,this.lastPosition[1]=o}}},playYoutubeVideo:function(e){e?this.player.playVideo():this.player.pauseVideo()}},mounted:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.windowHeight=window.innerHeight,e.videoHeight=320,e.videoWidth=400,e.$refs.youtube.player.width=200,e.$refs.youtube.player.height=150,e.loading=!0,t.next=8,e.loadNet();case 8:return t.next=10,e.getVideoInputs();case 10:return e.cameras=t.sent,t.next=13,e.loadVideo();case 13:e.loading=!1,e.detctPose();case 15:case"end":return t.stop()}}),t)})))()}},P=(n(202),Object(c.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"videocontent"},[n("youtube",{ref:"youtube",attrs:{"video-id":e.videoId,width:"640",height:"500",id:"youtube"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"status"},[n("div",{ref:"loading",style:{height:e.windowHeight+"px"},attrs:{id:"loading"}},[n("div",{staticClass:"sk-spinner sk-spinner-pulse"})])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],ref:"pose",attrs:{id:"main"}},[e._m(0),e._v(" "),n("video",{ref:"video",staticStyle:{"-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)","-webkit-transform":"scaleX(-1)",transform:"scaleX(-1)",display:"none"},attrs:{id:"video",playsinline:""}}),e._v(" "),n("canvas",{ref:"output",attrs:{id:"outut"}})])],1)}),m,!1,null,null,null).exports),T=n(204),k=n.n(T),C={data:function(){return{videos:[],params:{q:"",part:"snippet",type:"video",maxResults:"5",key:"AIzaSyBV-MiGcQLIYTy7rTBYQ6zxmWHvfoREbL0"},videoId:"",bSearch:!0,showTitle:!0}},components:{SearchBar:l,VideoList:h,HumanPose:P},methods:{searchVideo:function(e){this.params.q=e,this.bSearch=!0;var t=this;k.a.get("https://www.googleapis.com/youtube/v3/search",{params:this.params}).then((function(e){t.videos=e.data.items})),console.log(t.videos)},selectVideo:function(e){this.videoId=e,this.bSearch=!1,this.showTitle=!1},backToTop:function(e){this.videos=[],this.showTitle=!0,this.bSearch=!0}}},S=(n(221),Object(c.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container"},[n("SearchBar",{staticClass:"centering",attrs:{showTitle:e.showTitle},on:{"search-event":e.searchVideo,"back-to-top-event":e.backToTop}}),e._v(" "),e.bSearch?n("div",[n("VideoList",{attrs:{results:e.videos,showTitle:e.showTitle},on:{selectVideo:e.selectVideo}})],1):n("div",[n("HumanPose",{attrs:{videoId:e.videoId}})],1)],1)}),[],!1,null,null,null));t.default=S.exports}}]);