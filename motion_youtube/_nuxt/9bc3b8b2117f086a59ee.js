(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{151:function(e,t,n){var content=n(157);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(60).default)("5db11919",content,!0,{sourceMap:!1})},152:function(e,t,n){var content=n(182);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(60).default)("68544486",content,!0,{sourceMap:!1})},153:function(e,t,n){var content=n(184);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(60).default)("6759f5ab",content,!0,{sourceMap:!1})},156:function(e,t,n){"use strict";var r=n(151);n.n(r).a},157:function(e,t,n){(t=n(59)(!1)).push([e.i,".VueToNuxtLogo{display:inline-block;-webkit-animation:turn 2s linear 1s forwards;animation:turn 2s linear 1s forwards;transform:rotateX(180deg);position:relative;overflow:hidden;height:180px;width:245px}.Triangle{position:absolute;top:0;left:0;width:0;height:0}.Triangle--one{border-left:105px solid transparent;border-right:105px solid transparent;border-bottom:180px solid #41b883}.Triangle--two{top:30px;border-left:87.5px solid transparent;border-right:87.5px solid transparent;border-bottom:150px solid #3b8070}.Triangle--three,.Triangle--two{left:35px;-webkit-animation:goright .5s linear 3.5s forwards;animation:goright .5s linear 3.5s forwards}.Triangle--three{top:60px;border-left:70px solid transparent;border-right:70px solid transparent;border-bottom:120px solid #35495e}.Triangle--four{top:120px;left:70px;-webkit-animation:godown .5s linear 3s forwards;animation:godown .5s linear 3s forwards;border-left:35px solid transparent;border-right:35px solid transparent;border-bottom:60px solid #fff}@-webkit-keyframes turn{to{transform:rotateX(0deg)}}@keyframes turn{to{transform:rotateX(0deg)}}@-webkit-keyframes godown{to{top:180px}}@keyframes godown{to{top:180px}}@-webkit-keyframes goright{to{left:70px}}@keyframes goright{to{left:70px}}",""]),e.exports=t},164:function(e,t){},165:function(e,t){},166:function(e,t){},181:function(e,t,n){"use strict";var r=n(152);n.n(r).a},182:function(e,t,n){(t=n(59)(!1)).push([e.i,".content{width:100%;overflow:hidden}#main{width:100%;margin:10px}canvas{margin:0 30px}iframe{max-width:650px}#menu{position:absolute;text-align:center;bottom:3em;left:0;right:0}#menu ul{border-radius:2px;background-color:hsla(0,0%,100%,.3)}#menu li{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu .material-icons{font-size:30px}.sk-spinner-pulse{width:60px;height:60px;margin:40px auto;float:left;background-color:#333;border-radius:100%;-webkit-animation:sk-pulseScaleOut 1s ease-in-out infinite;animation:sk-pulseScaleOut 1s ease-in-out infinite}@-webkit-keyframes sk-pulseScaleOut{0%{transform:scale(0)}to{transform:scale(1);opacity:0}}@keyframes sk-pulseScaleOut{0%{transform:scale(0)}to{transform:scale(1);opacity:0}}",""]),e.exports=t},183:function(e,t,n){"use strict";var r=n(153);n.n(r).a},184:function(e,t,n){(t=n(59)(!1)).push([e.i,".content{min-height:100vh;display:flex;justify-content:center;align-items:center;text-align:center}.title{font-family:Quicksand,Source Sans Pro,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;display:block;font-weight:300;font-size:100px;color:#35495e;letter-spacing:1px}.subtitle{font-weight:300;font-size:42px;color:#526488;word-spacing:5px;padding-bottom:15px}.links{padding-top:15px}",""]),e.exports=t},185:function(e,t,n){"use strict";n.r(t);n(156);var r=n(24),o=Object(r.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"VueToNuxtLogo"},[t("div",{staticClass:"Triangle Triangle--two"}),this._v(" "),t("div",{staticClass:"Triangle Triangle--one"}),this._v(" "),t("div",{staticClass:"Triangle Triangle--three"}),this._v(" "),t("div",{staticClass:"Triangle Triangle--four"})])}],!1,null,null,null).exports,c=n(39),d=(n(158),n(13),n(28),n(5)),l=n(160),f=n(167),h=n(1),m=n(168),v=n.n(m);h.a.use(v.a);var w={name:"HumanPose",data:function(){return{net:{},video:{},cameras:[],cameraIndex:0,changingCamera:!1,loading:!0,windowHeight:0,framenum:0,lastPosition:[],videoId:"UP0jYMLfAtY"}},computed:{player:function(){return this.$refs.youtube.player}},methods:{changeCamera:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.changingCamera){t.next=2;break}return t.abrupt("return");case 2:return e.changingCamera=!0,e.cameraIndex++,e.cameraIndex>=e.cameras.length&&(e.cameraIndex=0),t.next=7,e.loadVideo();case 7:case"end":return t.stop()}}),t)})))()},loadNet:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.c();case 2:e.net=t.sent;case 3:case"end":return t.stop()}}),t)})))()},loadVideo:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setupCamera();case 2:e.video=t.sent,e.video.play();case 4:case"end":return t.stop()}}),t)})))()},setupCamera:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var video,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){t.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:return(video=e.$refs.video).width=e.videoWidth,video.height=e.videoHeight,e.stopExistingVideoCapture(),t.next=8,navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:e.cameras[e.cameraIndex].deviceId,width:e.videoWidth,height:e.videoHeight}});case 8:return n=t.sent,window.console.log("using camera: "+e.cameras[e.cameraIndex].label),video.srcObject=n,t.abrupt("return",new Promise((function(e){video.onloadedmetadata=function(){e(video)}})));case 12:case"end":return t.stop()}}),t)})))()},getVideoInputs:function(){return Object(d.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=3;break}return window.console.log("enumerateDevices() not supported."),e.abrupt("return",[]);case 3:return e.next=5,navigator.mediaDevices.enumerateDevices();case 5:return t=e.sent,n=t.filter((function(e){return"videoinput"===e.kind})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))()},stopExistingVideoCapture:function(){this.video&&this.video.srcObject&&(this.video.srcObject.getTracks().forEach((function(track){track.stop()})),this.video.srcObject=null)},isAndroid:function(){return/Android/i.test(navigator.userAgent)},isiOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return this.isAndroid()||this.isiOS()},detctPose:function(){var canvas=this.$refs.output;canvas.width=this.videoWidth,canvas.height=this.videoHeight;var e=this;function t(){return n.apply(this,arguments)}function n(){return(n=Object(d.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.estimateSegmentation();case 2:r=n.sent,e.drawMask(r,canvas,e.video,{r:0,g:0,b:0,a:0}),e.drawPose(r,canvas),requestAnimationFrame(t);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}t()},drawMask:function(e,canvas,video,t){var mask=f.d(e,t,{r:0,g:0,b:0,a:0},!1);f.a(canvas,video,mask,.3,0,!0)},drawPose:function(e,canvas){var t=this,n=canvas.getContext("2d");e.forEach((function(e){var r=e.pose;r=f.b(r,e.width),t.judgeMovement(r.keypoints,.1);for(var i=0;i<r.keypoints.length;i++){var o=r.keypoints[i];if(!(o.score<.1)){var c=o.position,d=c.y,h=c.x;t.drawPoint(n,1*d,1*h,5,"aqua")}}l.a(r.keypoints,.1).forEach((function(e){t.drawSegment(t.toTuple(e[0].position),t.toTuple(e[1].position),1,2.5,"aqua",n)}))}))},drawPoint:function(e,t,n,r,o){e.beginPath(),e.arc(n,t,r,0,2*Math.PI),e.fillStyle=o,e.fill()},drawSegment:function(e,t,n,r,o,d){var l=Object(c.a)(e,2),f=l[0],h=l[1],m=Object(c.a)(t,2),v=m[0],w=m[1];d.beginPath(),d.moveTo(h*n,f*n),d.lineTo(w*n,v*n),d.lineWidth=5,d.strokeStyle=o,d.stroke()},toTuple:function(e){return[e.y,e.x]},estimateSegmentation:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.net.segmentMultiPerson(e.video,{internalResolution:"medium",segmentationThreshold:.7,maxDetections:5,scoreThreshold:.2,nmsRadius:20,numKeypointForMatching:17,refineSteps:10});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},judgeMovement:function(e,t){if(this.framenum+=1,this.framenum>20&&(this.framenum=0),this.framenum%20==0){var n=e[10];if(n.score>t){var r=n.position.x,o=n.position.y;if(0!=this.lastPosition.length){var c=r-this.lastPosition[0],d=o-this.lastPosition[1];Math.sqrt(c*c+d*d)>5?this.playYoutubeVideo(!1):this.playYoutubeVideo(!0)}this.lastPosition[0]=r,this.lastPosition[1]=o}}},playYoutubeVideo:function(e){e?this.player.playVideo():this.player.pauseVideo()}},mounted:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.windowHeight=window.innerHeight,e.videoHeight=320,e.videoWidth=400,e.$refs.youtube.player.width=400,e.$refs.youtube.player.height=300,e.loading=!0,t.next=8,e.loadNet();case 8:return t.next=10,e.getVideoInputs();case 10:return e.cameras=t.sent,t.next=13,e.loadVideo();case 13:e.loading=!1,e.detctPose();case 15:case"end":return t.stop()}}),t)})))()}},x=(n(181),{components:{AppLogo:o,HumanPose:Object(r.a)(w,(function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.loading,expression:"loading"}],ref:"loading",style:{height:this.windowHeight+"px"},attrs:{id:"loading"}},[t("div",{staticClass:"sk-spinner sk-spinner-pulse"})]),this._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!this.loading,expression:"!loading"}],ref:"pose",attrs:{id:"main"}},[t("video",{ref:"video",staticStyle:{"-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)","-webkit-transform":"scaleX(-1)",transform:"scaleX(-1)",display:"none"},attrs:{id:"video",playsinline:""}}),this._v(" "),t("canvas",{ref:"output",attrs:{id:"outut"}}),this._v(" "),t("youtube",{ref:"youtube",attrs:{"video-id":this.videoId,width:"480",height:"320",id:"youtube"}})],1)])}),[],!1,null,null,null).exports}}),k=(n(183),Object(r.a)(x,(function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"container"},[t("HumanPose")],1)}),[],!1,null,null,null));t.default=k.exports}}]);